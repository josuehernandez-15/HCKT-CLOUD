# ============================================================
# ALERTA UTEC - SERVERLESS COMPOSE
# ============================================================

org: ${env:ORG_NAME}
app: alerta-utec-backend
stage: dev

services:
  # Capa compartida con dependencias Python
  dependencias:
    path: Dependencias

  # Microservicio de gestión de usuarios
  usuarios:
    path: Usuarios
    inputs:
      stage: ${self:stage}
      region: ${env:AWS_REGION, 'us-east-1'}
    dependsOn:
      - dependencias

  # Microservicio de gestión de incidentes
  incidentes:
    path: Incidentes
    inputs:
      stage: ${self:stage}
      region: ${env:AWS_REGION, 'us-east-1'}
    dependsOn:
      - dependencias
      - usuarios

  # Microservicio de analítica
  analitica:
    path: Analitica
    dependsOn:
      - dependencias
      - incidentes

  # Microservicio de notificaciones WebSocket
  notificaciones:
    path: Notificaciones
    dependsOn:
      - dependencias
      - usuarios
      - incidentes

  # Microservicio de Logs
  logs:
    path: Logs
    dependsOn:
      - dependencias
      - usuarios
      - incidentes

